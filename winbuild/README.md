# Windows build

- Install Microsoft Visual Studio 2019
- Build a CEF distribution with patches that make the embedded Chromium use an in-memory text-only clipboard that Browservice can access (note that this takes a lot of time, memory and disk space):
    - See the instructions in https://bitbucket.org/chromiumembedded/cef/wiki/AutomatedBuildSetup.md#markdown-header-windows-configuration
    - Ensure that you have the Visual Studio 2019 components mentioned in the instructions and Python 3 installed
    - Follow the instructions for running the `automate-git.py` script from https://bitbucket.org/chromiumembedded/cef/raw/master/tools/automate/automate-git.py with correct environment variables. Use flags `--url=https://bitbucket.org/toptalvitie/cef.git --branch=4664` to make the script use the CEF source code with Browservice patches from https://bitbucket.org/toptalvitie/cef/src/4664/. Make sure to build in a short and safe path such as `C:\code`
    - After `automate-git.py` has run successfully, copy the created binary distribution tarball named `cef_binary_XYZ+XYZ+chromium-XYZ_windowsXYZ.tar.bz2` from `chromium\src\cef\binary_distrib` to this directory. You can remove the rest of the files generated by the build script.
- Install Browservice dependencies:
    - Install Microsoft vcpkg https://github.com/microsoft/vcpkg with Visual Studio integration
    - Install required vcpkg packages using the following commands (these commands install both 32-bit and 64-bit versions; you may remove the ones not relevant for your build):
        ```
        vcpkg install openssl:x86-windows openssl:x64-windows
        vcpkg install pango:x86-windows pango:x64-windows poco[netssl]:x86-windows poco[netssl]:x64-windows libjpeg-turbo:x86-windows libjpeg-turbo:x64-windows
        ```

TODO 
